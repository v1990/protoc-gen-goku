data:
  TemplatePath: '{{.Params.workPath}}/templates'
  HandlerPath : '{{.Params.workPath}}/handlers'
  CopyRight   : |-
    // Code generated by protoc-gen-goku.
    // source: {{.File.Name}}

  ServiceName : '{{.Service.GetName}}'
  serviceName : '{{snakecase .Service.GetName}}'
  HandlerName : '{{list .Service.GetName "Handler"|join ""|title }}'
  handlerName : '{{list .Service.GetName "Handler"|join ""|untitle }}'

jobs:
  - name         : "handler-service"
#    template     : "/* {{showJSON . 2}} */"
    template_path: '{{.TemplatePath}}/handler-service.tmpl'
    enable       :
      loop: [ "service" ]
    plugins      : [ "golang" ]
    out          : "{{.HandlerPath}}/{{.serviceName}}/{{.serviceName}}.handler.go"

  - name         : "handler-method"
    template_path: '{{.TemplatePath}}/handler-method.tmpl'
    enable       :
      loop: [ "method" ]
    plugins      : [ "golang" ]
    out          : "{{.HandlerPath}}/{{.serviceName}}/{{.MethodName}}.go"
    values       :
      - MethodName: '{{title .Method.GetName}}'
      - methodName: '{{untitle .MethodName}}'
      - InTypeName : '{{getGoTypeName .Method.InputType}}'
        OutTypeName: '{{getGoTypeName .Method.OutputType}}'
      - InTypeName : '{{list .FileGoPackageName .InTypeName|join "."}}'
        OutTypeName: '{{list .FileGoPackageName .OutTypeName|join "."}}'

